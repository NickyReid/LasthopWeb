import os
import spotipy

import controller
from spotify_client import SpotifyClient
import json
from datetime import datetime
from dotenv import load_dotenv
from flask import Flask, render_template, request, redirect, session
# from flask_session import Session


load_dotenv()
app = Flask(__name__)

# app.secret_key = os.urandom(64)
app.secret_key = os.getenv('SESSION_SECRET_KEY')
# app.config['SECRET_KEY'] = os.urandom(64)
# Session(app)


@app.route('/', methods=['POST', 'GET'])
def index():
    lastfm_user_data = None
    username = None
    message = None
    playlist_url = None
    stats = None
    tz_offset = None
    cache_handler = spotipy.cache_handler.FlaskSessionCacheHandler(session)
    sp_oauth = spotipy.oauth2.SpotifyOAuth(redirect_uri=f"{os.getenv('HOST')}/",
                                           scope="playlist-modify-private", cache_handler=cache_handler)
    auth_url = sp_oauth.get_authorize_url()
    if "username" in session:
        username = session["username"]
    if "lastfm_user_data" in session:
        lastfm_user_data = session["lastfm_user_data"]
    if "playlist_url" in session:
        playlist_url = session["playlist_url"]
    if "tz_offset" in session:
        tz_offset = session["tz_offset"]

    if request.method == 'GET':
        if request.args.get("code"):
            session["access_token"] = sp_oauth.get_access_token(request.args.get("code"), as_dict=False)
            spotify_client = SpotifyClient(sp_oauth)
            playlist_id, playlist_url = controller.make_playlist(spotify_client=spotify_client,
                                                                 lastfm_user_data=lastfm_user_data)
            session["playlist_url"] = playlist_url
            return redirect('/')

    elif request.method == 'POST':
        if request.form.get("tz_offset"):
            session["tz_offset"] = tz_offset = int(request.form["tz_offset"])

        if request.form.get("username"):
            username = request.form['username']
            session["username"] = username
            lastfm_user_data = controller.get_lastfm_user_data(username)
            session["lastfm_user_data"] = lastfm_user_data
            if lastfm_user_data and lastfm_user_data.get("username"):
                username = session["username"] = lastfm_user_data["username"]

        make_playlist = request.form.get('make_playlist')
        if make_playlist:
            # if not sp_oauth.validate_token(cache_handler.get_cached_token()):
            spotify_client = SpotifyClient(sp_oauth)
            # playlist_id, playlist_url = spotify_client.make_playlist()
            playlist_id, playlist_url = controller.make_playlist(spotify_client=spotify_client, lastfm_user_data=lastfm_user_data)

    if username:
        if lastfm_user_data:
            message = f"{username} has been on Last.fm since {datetime.strftime(lastfm_user_data.get('join_date').date(), '%-d %B %Y')}"
            stats = controller.get_stats(lastfm_user_data, tz_offset)
            # stats = mock_stats()
            # print(stats)
        else:
            message = f"{username} not found on Last.fm"
    return render_template('index.html', lastfm_user_data=lastfm_user_data, playlist_url=playlist_url, message=message, auth_url=auth_url, stats=stats)


def mock_stats():
    return [{'day': datetime(2024, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'George Clanton', 'track_data': {'playcount': 7, 'tracks': [{'track_name': 'F.U.M.L.', 'timestamp': None}, {'track_name': 'Vapor King / SubReal', 'timestamp': '1704811956'}, {'track_name': 'You Hold the Key and I Found It', 'timestamp': '1704811542'}, {'track_name': 'I Been Young', 'timestamp': '1704811360'}, {'track_name': 'Punching down', 'timestamp': '1704811084'}, {'track_name': 'Justify Your Life', 'timestamp': '1704810830'}, {'track_name': 'Everything I Want', 'timestamp': '1704810658'}]}}, {'artist': 'Someone Still Loves You Boris Yeltsin', 'track_data': {'playcount': 5, 'tracks': [{'track_name': 'Anna Lee', 'timestamp': '1704793584'}, {'track_name': 'Oregon Girl', 'timestamp': '1704792822'}, {'track_name': "What'll We Do", 'timestamp': '1704774976'}, {'track_name': 'Pangea', 'timestamp': '1704774648'}, {'track_name': 'House Fire', 'timestamp': '1704774450'}]}}, {'artist': 'bl4ck m4rket c4rt', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Alive, Always', 'timestamp': '1704810503'}, {'track_name': 'Trapdoors That Open', 'timestamp': '1704810073'}, {'track_name': 'Good Morning Texts', 'timestamp': '1704809914'}]}}, {'artist': 'Skeler', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'What If (Skeler Remix)', 'timestamp': '1704809181'}, {'track_name': 'ADRENALIN', 'timestamp': '1704805485'}, {'track_name': 'Ashes', 'timestamp': '1704803569'}]}}, {'artist': 'DVRST', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Endless Love', 'timestamp': '1704808079'}, {'track_name': 'REASON TO LIVE', 'timestamp': '1704805596'}]}}, {'artist': 'almogfx', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Fractal Shades', 'timestamp': '1704805400'}, {'track_name': 'exhume', 'timestamp': '1704803438'}]}}, {'artist': 'Kareful', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Play It Cool', 'timestamp': '1704805084'}, {'track_name': 'Phantom', 'timestamp': '1704801948'}]}}, {'artist': 'Sibewest', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'I Like That', 'timestamp': '1704803995'}, {'track_name': 'No Future', 'timestamp': '1704802067'}]}}, {'artist': 'DRS', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Concrete Blocks', 'timestamp': '1704793730'}, {'track_name': 'The View', 'timestamp': '1704793100'}]}}, {'artist': 'Park Skyzoo', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Twice', 'timestamp': '1704809811'}]}}, {'artist': 'HXVRMXN', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'SOUTH II', 'timestamp': '1704809625'}]}}, {'artist': 'Øneheart', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Next to You', 'timestamp': '1704809503'}]}}, {'artist': 'Kordhell', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'LAND OF FIRE', 'timestamp': '1704809350'}]}}, {'artist': 'DXXDLY', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'To No End', 'timestamp': '1704809041'}]}}, {'artist': 'DXRK SPACE', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Slowly Driving In The Dark', 'timestamp': '1704808893'}]}}, {'artist': 'ETERNVL SVDNESS', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Blind', 'timestamp': '1704808672'}]}}, {'artist': 'WilliX', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Metadata', 'timestamp': '1704808409'}]}}, {'artist': 'LXST CXNTURY', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'METROPOLISES CRY', 'timestamp': '1704807692'}]}}, {'artist': 'Øfdream', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Perception', 'timestamp': '1704807447'}]}}, {'artist': 'Tokyo Tears', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Blurred lights', 'timestamp': '1704807007'}]}}, {'artist': 'DJ Jacob', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Midnight Club', 'timestamp': '1704806877'}]}}, {'artist': 'Brothel', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'VEDMA', 'timestamp': '1704806647'}]}}, {'artist': 'Alx Beats', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Sangria', 'timestamp': '1704806485'}]}}, {'artist': 'Petsmpi', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'STARGAZE', 'timestamp': '1704806401'}]}}, {'artist': 'HEARSE.T', 'track_data': {'playcount': 1, 'tracks': [{'track_name': "Havin' Thangz", 'timestamp': '1704806189'}]}}, {'artist': 'Rvfvel', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'RAKE IT UP', 'timestamp': '1704806097'}]}}, {'artist': 'vowl.', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'in my heart', 'timestamp': '1704805172'}]}}, {'artist': 'Danger', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Cosmic Cruise', 'timestamp': '1704804841'}]}}, {'artist': 'LONOWN', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Fatality', 'timestamp': '1704804604'}]}}, {'artist': 'Cypariss', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'EMPTY DREAMS', 'timestamp': '1704804492'}]}}, {'artist': 'KTrek', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Lohka', 'timestamp': '1704804294'}]}}, {'artist': 'ipnosis', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'North', 'timestamp': '1704804111'}]}}, {'artist': 'enjoii', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'No Pain', 'timestamp': '1704803774'}]}}, {'artist': 'Elestu', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Overcast', 'timestamp': '1704803271'}]}}, {'artist': 'skxllflower', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'OVTSIDE', 'timestamp': '1704803154'}]}}, {'artist': 'Falxce', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Blow With The Hoe', 'timestamp': '1704802987'}]}}, {'artist': 'F.O.O.L', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Motor', 'timestamp': '1704802791'}]}}, {'artist': 'MYSTXRIVL', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Vanity', 'timestamp': '1704802579'}]}}, {'artist': 'Rameses B', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'New Meaning', 'timestamp': '1704802406'}]}}, {'artist': 'WEEDMANE', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'SUICIDE YEAR - airshade Remix', 'timestamp': '1704802283'}]}}, {'artist': 'Skeler, Ytho', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Final Call', 'timestamp': '1704794290'}]}}, {'artist': 'Cyrex', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Afterlife', 'timestamp': '1704793941'}]}}, {'artist': 'Minus the Bear', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'White Mystery', 'timestamp': '1704774144'}]}}, {'artist': 'Cymbals Eat Guitars', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Cold Spring', 'timestamp': '1704773797'}]}}, {'artist': 'Silversun Pickups', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Lazy Eye', 'timestamp': '1704773432'}]}}, {'artist': 'Air', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Universal Traveler', 'timestamp': '1704772873'}]}}, {'artist': 'alt-J', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Taro', 'timestamp': '1704772352'}]}}, {'artist': 'Worakls', 'track_data': {'playcount': 1, 'tracks': [{'track_name': "Bleu - N'to Remix", 'timestamp': '1704771576'}]}}, {'artist': 'Arcade Fire', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Modern Man', 'timestamp': '1704771378'}]}}, {'artist': 'Recondite', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Riant', 'timestamp': '1704771043'}]}}, {'artist': 'Darkside', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Golden Arrow', 'timestamp': '1704770518'}]}}, {'artist': 'Wolfmother', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Dimension', 'timestamp': '1704770019'}]}}, {'artist': 'Tinlicker', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Because You Move Me', 'timestamp': '1704769633'}]}}]}, {'day': datetime(2023, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Tinlicker', 'track_data': {'playcount': 5, 'tracks': [{'track_name': 'Hypnotised', 'timestamp': '1673253218'}, {'track_name': 'Tell Me', 'timestamp': '1673252751'}, {'track_name': 'Voodoo', 'timestamp': '1673252517'}, {'track_name': 'Rebirth', 'timestamp': '1673252231'}, {'track_name': 'Because You Move Me', 'timestamp': '1673252036'}]}}, {'artist': 'Ben Böhmer', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Run Away', 'timestamp': '1673252955'}]}}]}, {'day': datetime(2018, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Wolfmother', 'track_data': {'playcount': 16, 'tracks': [{'track_name': 'Pretty Peggy', 'timestamp': '1515497576'}, {'track_name': 'Baroness', 'timestamp': '1515497381'}, {'track_name': 'Victorious', 'timestamp': '1515497116'}, {'track_name': 'The Love That You Give', 'timestamp': '1515496957'}, {'track_name': 'Vagabond', 'timestamp': '1515496735'}, {'track_name': 'Witchcraft', 'timestamp': '1515496530'}, {'track_name': 'Tales From The Forest Of Gnomes', 'timestamp': '1515491891'}, {'track_name': 'Apple Tree', 'timestamp': '1515491683'}, {'track_name': 'Where Eagles Have Been', 'timestamp': '1515491233'}, {'track_name': 'Dimension', 'timestamp': '1515490967'}, {'track_name': 'Joker and the Thief', 'timestamp': '1515490688'}, {'track_name': "Mind's Eye", 'timestamp': '1515490394'}, {'track_name': 'Pyramid', 'timestamp': '1515486081'}, {'track_name': 'White Unicorn', 'timestamp': '1515485780'}, {'track_name': 'Woman', 'timestamp': '1515485604'}, {'track_name': 'Colossal', 'timestamp': '1515485301'}]}}, {'artist': 'Maribou State', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'Tongue (Drew Hill Remix) [feat. Holly Walker]', 'timestamp': '1515515107'}, {'track_name': 'Moon Circles', 'timestamp': '1515514863'}, {'track_name': 'Manila', 'timestamp': '1515514670'}, {'track_name': 'Natural Fools', 'timestamp': '1515481999'}]}}, {'artist': 'Darkside', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Golden Arrow', 'timestamp': '1515481200'}, {'track_name': 'Give Me My Water!', 'timestamp': '1515480585'}]}}, {'artist': 'Recondite', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Riant', 'timestamp': '1515479861'}, {'track_name': 'Harbinger', 'timestamp': '1515450673'}]}}, {'artist': 'Solomun', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Living On', 'timestamp': '1515500291'}]}}, {'artist': 'Thyladomid', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'The Way I Feel', 'timestamp': '1515499624'}]}}, {'artist': 'Adriatique', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Roads', 'timestamp': '1515499197'}]}}, {'artist': 'Hunter_Game', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Call My Name', 'timestamp': '1515498763'}]}}, {'artist': 'DJ Phono', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'New Year Eve', 'timestamp': '1515498264'}]}}, {'artist': 'Rx Bandits', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'White Lies', 'timestamp': '1515498117'}]}}, {'artist': 'Unknown Mortal Orchestra', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Multi-Love', 'timestamp': '1515482376'}]}}, {'artist': 'Robot Koch', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Dreams (feat. Stephen Henderson)', 'timestamp': '1515479620'}]}}, {'artist': 'Max Cooper', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Coils of Living Synthesis', 'timestamp': '1515479296'}]}}, {'artist': 'Christian Löffler', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Field', 'timestamp': '1515478801'}]}}, {'artist': 'Felix Laband', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Squeeze The Trigger', 'timestamp': '1515478251'}]}}, {'artist': 'Floating Points', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Montparnasse', 'timestamp': '1515477452'}]}}, {'artist': 'Four Tet', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Sing', 'timestamp': '1515451166'}]}}, {'artist': 'Stimming', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'November Morning', 'timestamp': '1515450166'}]}}, {'artist': 'Caribou', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Back Home', 'timestamp': '1515449953'}]}}, {'artist': 'Nicolas Jaar', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Screams at the Edge of Dawn', 'timestamp': '1515449810'}]}}, {'artist': 'Nicola Cruz', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Invocacion (original mix)', 'timestamp': '1515449583'}]}}, {'artist': 'Weval', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'The Battle', 'timestamp': '1515449331'}]}}]}, {'day': datetime(2017, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Bibio', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Look at Orion!', 'timestamp': '1483984277'}]}}]}, {'day': datetime(2015, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Arcade Fire', 'track_data': {'playcount': 32, 'tracks': [{'track_name': 'Culture War', 'timestamp': '1420840318'}, {'track_name': 'The Suburbs (Continued)', 'timestamp': '1420840230'}, {'track_name': 'Sprawl II (Mountains Beyond Mountains)', 'timestamp': '1420839904'}, {'track_name': 'Sprawl (Flatland)', 'timestamp': '1420839730'}, {'track_name': 'We Used to Wait', 'timestamp': '1420839429'}, {'track_name': 'Deep Blue', 'timestamp': '1420839161'}, {'track_name': 'Wasted Hours', 'timestamp': '1420838960'}, {'track_name': 'Month of May', 'timestamp': '1420838729'}, {'track_name': 'Suburban War', 'timestamp': '1420838444'}, {'track_name': 'Half Light II (No Celebration)', 'timestamp': '1420838177'}, {'track_name': 'Half Light I', 'timestamp': '1420837923'}, {'track_name': 'City With No Children', 'timestamp': '1420837732'}, {'track_name': 'Empty Room', 'timestamp': '1420837560'}, {'track_name': 'Rococo', 'timestamp': '1420837323'}, {'track_name': 'Modern Man', 'timestamp': '1420837044'}, {'track_name': 'Ready to Start', 'timestamp': '1420836788'}, {'track_name': 'The Suburbs', 'timestamp': '1420836472'}, {'track_name': 'We Used to Wait', 'timestamp': '1420835592'}, {'track_name': 'Afterlife', 'timestamp': '1420829907'}, {'track_name': 'Porno', 'timestamp': '1420829544'}, {'track_name': "It's Never Over (Oh Orpheus)", 'timestamp': '1420829141'}, {'track_name': 'Awful Sound (Oh Eurydice)', 'timestamp': '1420828767'}, {'track_name': 'Here Comes the Night Time II', 'timestamp': '1420828595'}, {'track_name': 'Hidden Track', 'timestamp': '1420827994'}, {'track_name': 'Joan of Arc', 'timestamp': '1420827668'}, {'track_name': 'You Already Know', 'timestamp': '1420827429'}, {'track_name': 'Normal Person', 'timestamp': '1420827167'}, {'track_name': 'Here Comes the Night Time', 'timestamp': '1420826776'}, {'track_name': 'Flashbulb Eyes', 'timestamp': '1420826614'}, {'track_name': 'We Exist', 'timestamp': '1420826270'}, {'track_name': 'Reflektor', 'timestamp': '1420825816'}, {'track_name': 'My Body Is a Cage', 'timestamp': '1420825529'}]}}, {'artist': 'Modest Mouse', 'track_data': {'playcount': 16, 'tracks': [{'track_name': 'Paper Thin Walls', 'timestamp': '1420798631'}, {'track_name': "I've Got It All (Most)", 'timestamp': '1420798443'}, {'track_name': 'The Good Times Are Killing Me', 'timestamp': '1420798199'}, {'track_name': 'One Chance', 'timestamp': '1420798013'}, {'track_name': 'Black Cadillacs', 'timestamp': '1420797850'}, {'track_name': 'Blame It On The Tetons', 'timestamp': '1420797525'}, {'track_name': "Eric's Interlude", 'timestamp': '1420797466'}, {'track_name': 'Satin in a Coffin', 'timestamp': '1420797311'}, {'track_name': 'The View', 'timestamp': '1420797061'}, {'track_name': "The Devil's Work Day", 'timestamp': '1420796923'}, {'track_name': 'Bukowski', 'timestamp': '1420796667'}, {'track_name': 'Dance Hall', 'timestamp': '1420796490'}, {'track_name': 'Bury Me With It', 'timestamp': '1420796261'}, {'track_name': 'The Ocean Breathes Salty', 'timestamp': '1420795875'}, {'track_name': 'Float On', 'timestamp': '1420795667'}, {'track_name': 'World at Large', 'timestamp': '1420795395'}]}}, {'artist': 'Worakls', 'track_data': {'playcount': 5, 'tracks': [{'track_name': 'When the birds go in the way', 'timestamp': '1420824633'}, {'track_name': "Souvenir (N'to remix)", 'timestamp': '1420824137'}, {'track_name': "Bleu (N'to Remix)", 'timestamp': '1420823521'}, {'track_name': 'Porto (Original Mix)', 'timestamp': '1420823191'}, {'track_name': 'Elea (Original Mix)', 'timestamp': '1420822807'}]}}, {'artist': "N'to", 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Scar Tissue', 'timestamp': '1420835244'}, {'track_name': 'Live November 2013 (WeAre Together)', 'timestamp': '1420830259'}, {'track_name': 'Trauma (Worakls Remix)', 'timestamp': '1420822207'}]}}, {'artist': 'Bonobo', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Eyesdown (Floating Points Remix)', 'timestamp': '1420819484'}, {'track_name': 'The Keeper featuring Andreya Triana', 'timestamp': '1420819196'}, {'track_name': 'All in Forms', 'timestamp': '1420818905'}]}}, {'artist': 'alt-J', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Taro', 'timestamp': '1420798812'}, {'track_name': 'Bloodflood pt. II', 'timestamp': '1420795067'}, {'track_name': 'Bloodflood', 'timestamp': '1420794817'}]}}, {'artist': 'Moderat', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Bad Kingdom', 'timestamp': '1420840738'}, {'track_name': 'The Mark (Interlude)', 'timestamp': '1420840642'}]}}, {'artist': 'Arctic Monkeys', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'RU Mine', 'timestamp': '1420836299'}, {'track_name': '505', 'timestamp': '1420836046'}]}}, {'artist': 'Air', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Universal Traveler', 'timestamp': '1420794572'}, {'track_name': 'Alpha Beta Gaga', 'timestamp': '1420794292'}]}}, {'artist': 'Peter Bjorn and John', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Young Folks', 'timestamp': '1420825254'}]}}, {'artist': 'ODESZA', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'How Did I Get Here', 'timestamp': '1420825127'}]}}, {'artist': 'Niva', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Forest View', 'timestamp': '1420822002'}]}}, {'artist': 'Nomadic Firs', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Cover Bombs (Odesza Edit)', 'timestamp': '1420821792'}]}}, {'artist': 'Neat Beats', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Graffiti on a Tuesday Night', 'timestamp': '1420821533'}]}}, {'artist': 'Mule & Mathias Ache', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Sonnette (Alex Q And Jule Re-Edit)', 'timestamp': '1420821109'}]}}, {'artist': 'Mob Device', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'In the Summer (Original Mix)', 'timestamp': '1420820894'}]}}, {'artist': 'Mind Against', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Atlant (Original Mix)', 'timestamp': '1420820353'}]}}, {'artist': 'Bonobo feat. Grey Reverend', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'First Fires (Maya Jane Coles Remix)', 'timestamp': '1420819994'}]}}, {'artist': 'Christian Tiger School', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Electric Mountain', 'timestamp': '1420803250'}]}}, {'artist': 'Andrew Bird', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Masterfade', 'timestamp': '1420802999'}]}}]}, {'day': datetime(2014, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Bob Marley', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Put It On', 'timestamp': '1389287618'}, {'track_name': 'Sun Is Shining', 'timestamp': '1389287284'}]}}, {'artist': 'Silversun Pickups', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Lazy Eye (edit)', 'timestamp': '1389267564'}]}}, {'artist': 'Mount Kimbie', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Made to Stray', 'timestamp': '1389267303'}]}}, {'artist': 'Death Cab for Cutie', 'track_data': {'playcount': 1, 'tracks': [{'track_name': '405 (acoustic)', 'timestamp': '1389266997'}]}}]}, {'day': datetime(2012, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Death Cab for Cutie', 'track_data': {'playcount': 28, 'tracks': [{'track_name': 'Crooked Teeth', 'timestamp': '1326122050'}, {'track_name': 'Line of Best Fit', 'timestamp': '1326121845'}, {'track_name': 'Monday Morning', 'timestamp': '1326121496'}, {'track_name': '405 [Acoustic]', 'timestamp': '1326121237'}, {'track_name': 'Title and Registration', 'timestamp': '1326121056'}, {'track_name': 'I Will Follow You Into The Dark', 'timestamp': '1326120589'}, {'track_name': 'Stability', 'timestamp': '1326120227'}, {'track_name': 'Sleep Tight', 'timestamp': '1326119486'}, {'track_name': 'Spring Break Broke', 'timestamp': '1326119202'}, {'track_name': 'A Movie Script Ending', 'timestamp': '1326118932'}, {'track_name': 'This Charming Man', 'timestamp': '1326118695'}, {'track_name': 'Technicolor Girls', 'timestamp': '1326118560'}, {'track_name': 'Some Boys', 'timestamp': '1326118339'}, {'track_name': 'Champagne From a Paper Cup', 'timestamp': '1326118144'}, {'track_name': 'Stay Young, Go Dancing', 'timestamp': '1326117985'}, {'track_name': 'Styrofoam Plates', 'timestamp': '1326117617'}, {'track_name': 'Your Heart Is an Empty Room', 'timestamp': '1326117072'}, {'track_name': 'Tiny Vessels', 'timestamp': '1326116852'}, {'track_name': 'Meet Me on the Equinox', 'timestamp': '1326116590'}, {'track_name': "Why You'd Want to Live Here", 'timestamp': '1326116371'}, {'track_name': "That's Incentive", 'timestamp': '1326116096'}, {'track_name': 'I Was a Kaleidoscope', 'timestamp': '1326115962'}, {'track_name': 'Cath...', 'timestamp': '1326115792'}, {'track_name': "Expo '86", 'timestamp': '1326115564'}, {'track_name': '20th Century Towers', 'timestamp': '1326115313'}, {'track_name': 'Coney Island', 'timestamp': '1326105192'}, {'track_name': 'President of What', 'timestamp': '1326105031'}, {'track_name': 'Photobooth', 'timestamp': '1326104763'}]}}]}, {'day': datetime(2011, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Max Bemis and The Painful Splits', 'track_data': {'playcount': 9, 'tracks': [{'track_name': 'Assimilate All Bastards', 'timestamp': '1294600369'}, {'track_name': 'Waster', 'timestamp': '1294600189'}, {'track_name': 'Piss On The Precedent', 'timestamp': '1294600012'}, {'track_name': 'Ms. Martin', 'timestamp': '1294599818'}, {'track_name': 'Little Star', 'timestamp': '1294599676'}, {'track_name': 'Former Punisher Gone Rogue', 'timestamp': '1294599481'}, {'track_name': 'Do the Dohnk', 'timestamp': '1294599294'}, {'track_name': 'Our Sentence Is Up', 'timestamp': '1294599093'}, {'track_name': 'Neodouche', 'timestamp': '1294598897'}]}}, {'artist': "Gatsby's American Dream", 'track_data': {'playcount': 7, 'tracks': [{'track_name': 'Snicker at the Swine', 'timestamp': '1294594235'}, {'track_name': 'A Manifesto of Tangible Wealth', 'timestamp': '1294594107'}, {'track_name': 'Work, Lies, Sex, Love, Fear, Hate, Friendship', 'timestamp': '1294593990'}, {'track_name': 'Epilogue', 'timestamp': '1294593822'}, {'track_name': "We're Not Orphans", 'timestamp': '1294593680'}, {'track_name': 'The Taming', 'timestamp': '1294593595'}, {'track_name': 'The Badlands', 'timestamp': '1294593431'}]}}, {'artist': 'Cymbals Eat Guitars', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'Wind Phoenix (Proper Name)', 'timestamp': '1294603387'}, {'track_name': 'Cold Spring', 'timestamp': '1294603016'}, {'track_name': 'Indiana', 'timestamp': '1294602774'}, {'track_name': 'Turguska', 'timestamp': '1294602485'}]}}, {'artist': 'Minus the Bear', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'Knights', 'timestamp': '1294602235'}, {'track_name': 'Ice Monster', 'timestamp': '1294602013'}, {'track_name': 'Part 2', 'timestamp': '1294601807'}, {'track_name': "Throwin' Shapes", 'timestamp': '1294601602'}]}}, {'artist': 'The Tallest Man on Earth', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Shallow Grave', 'timestamp': '1294601425'}, {'track_name': 'I Want You', 'timestamp': '1294601253'}, {'track_name': 'I won’t be found', 'timestamp': '1294601110'}]}}, {'artist': 'Someone Still Loves You Boris Yeltsin', 'track_data': {'playcount': 3, 'tracks': [{'track_name': 'Miss World', 'timestamp': '1294600494'}, {'track_name': 'House Fire', 'timestamp': '1294598689'}, {'track_name': 'Think I Wanna Die', 'timestamp': '1294597887'}]}}, {'artist': 'The Gaslight Anthem', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'The Backseat', 'timestamp': '1294570483'}, {'track_name': "Here's Looking At You, Kid", 'timestamp': '1294570267'}]}}, {'artist': 'Death Cab for Cutie', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Company Calls (epilogue)', 'timestamp': '1294600847'}]}}, {'artist': 'Ella Fitzgerald', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'If Dreams Come True', 'timestamp': '1294598514'}]}}, {'artist': 'Modest Mouse', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Invisible', 'timestamp': '1294598272'}]}}, {'artist': 'Saosin', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Translating the Name', 'timestamp': '1294598057'}]}}, {'artist': 'Thrice', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Paper Tigers', 'timestamp': '1294597642'}]}}, {'artist': 'The Sound of Animals Fighting', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'The Heretic (Evol Intent)', 'timestamp': '1294597445'}]}}, {'artist': 'The Academy Is...', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Attention', 'timestamp': '1294597133'}]}}]}, {'day': datetime(2010, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'Saosin', 'track_data': {'playcount': 15, 'tracks': [{'track_name': 'I Can Tell There Was an Accident Here Earlier', 'timestamp': '1262995319'}, {'track_name': 'You Never Noticed Me (Bonus track for japan)', 'timestamp': '1262995097'}, {'track_name': 'Fireflies (Light Messengers)', 'timestamp': '1262994587'}, {'track_name': 'Nothing Is What It Seems (Without You)', 'timestamp': '1262994322'}, {'track_name': 'Is This Real', 'timestamp': '1262994082'}, {'track_name': 'What Were We Made For', 'timestamp': '1262993867'}, {'track_name': "It's All Over Now", 'timestamp': '1262993640'}, {'track_name': 'The Worst Of Me', 'timestamp': '1262993424'}, {'track_name': 'Say Goodbye', 'timestamp': '1262993120'}, {'track_name': 'The Alarming Sound Of A Still Small Voice', 'timestamp': '1262992837'}, {'track_name': 'On My Own', 'timestamp': '1262992519'}, {'track_name': 'Changing', 'timestamp': '1262992291'}, {'track_name': "Why Can't You See?", 'timestamp': '1262992132'}, {'track_name': 'Deep Down', 'timestamp': '1262991926'}, {'track_name': 'I Keep My Secrets Safe', 'timestamp': '1262991690'}]}}, {'artist': 'Circa Survive', 'track_data': {'playcount': 10, 'tracks': [{'track_name': 'Your Friends Are Gone', 'timestamp': '1263020691'}, {'track_name': 'Close Your Eyes To See', 'timestamp': '1263020477'}, {'track_name': 'Carry Us Away', 'timestamp': '1263020277'}, {'track_name': 'On Letting Go', 'timestamp': '1262996849'}, {'track_name': 'Kicking Your Crosses Down', 'timestamp': '1262996631'}, {'track_name': 'Semi Constructive Criticism', 'timestamp': '1262996429'}, {'track_name': 'Travel Hymn', 'timestamp': '1262996236'}, {'track_name': 'Mandala', 'timestamp': '1262996033'}, {'track_name': 'The Difference Between Medicine And Poison Is In The Dose', 'timestamp': '1262995775'}, {'track_name': 'The Greatest Lie', 'timestamp': '1262995553'}]}}, {'artist': 'Modest Mouse', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'Baby Blue Sedan', 'timestamp': '1262989947'}, {'track_name': 'All Night Diner', 'timestamp': '1262989663'}, {'track_name': "Workin' on Leavin' the Livin'", 'timestamp': '1262989263'}, {'track_name': 'Medication', 'timestamp': '1262988961'}]}}]}, {'day': datetime(2009, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'The Beatles', 'track_data': {'playcount': 17, 'tracks': [{'track_name': 'Love Me Do', 'timestamp': '1231509446'}, {'track_name': 'All My Loving', 'timestamp': '1231509317'}, {'track_name': 'Lucy in the Sky With Diamonds', 'timestamp': '1231509108'}, {'track_name': 'With a Little Help From My Friends', 'timestamp': '1231508945'}, {'track_name': "Sgt. Pepper's Lonely Hearts Club Band", 'timestamp': '1231508823'}, {'track_name': 'Across the Universe', 'timestamp': '1231508594'}, {'track_name': 'Here Comes the Sun', 'timestamp': '1231508311'}, {'track_name': 'Across the Universe', 'timestamp': '1231487226'}, {'track_name': 'Let It Be', 'timestamp': '1231486991'}, {'track_name': 'All My Loving', 'timestamp': '1231486856'}, {'track_name': 'Hey Jude', 'timestamp': '1231486412'}, {'track_name': 'All You Need Is Love', 'timestamp': '1231486172'}, {'track_name': 'Yellow Submarine', 'timestamp': '1231486008'}, {'track_name': 'Yesterday', 'timestamp': '1231485873'}, {'track_name': 'Help!', 'timestamp': '1231485734'}, {'track_name': 'I Wanna Hold Your Hand', 'timestamp': '1231485575'}, {'track_name': 'She Loves You', 'timestamp': '1231485434'}]}}, {'artist': 'Fall Out Boy', 'track_data': {'playcount': 14, 'tracks': [{'track_name': 'Of All the Gin Joints in All the World', 'timestamp': '1231503966'}, {'track_name': 'West Coast Smoker', 'timestamp': '1231503612'}, {'track_name': '20 Dollar Nose Bleed', 'timestamp': '1231503354'}, {'track_name': 'w.a.m.s', 'timestamp': '1231503077'}, {'track_name': 'Tiffany Blews', 'timestamp': '1231502852'}, {'track_name': '27', 'timestamp': '1231502660'}, {'track_name': 'What a Catch, Donnie', 'timestamp': '1231502370'}, {'track_name': "(Coffee's for Closers)", 'timestamp': '1231502094'}, {'track_name': 'The (Shipped) Gold Standard', 'timestamp': '1231501896'}, {'track_name': 'Headfirst Slide Into Coopestown on a Bad Bet', 'timestamp': '1231501662'}, {'track_name': "America's Suitehearts", 'timestamp': '1231501448'}, {'track_name': "She's My Winona", 'timestamp': '1231501216'}, {'track_name': "I Don't Care", 'timestamp': '1231501002'}, {'track_name': 'Disloyal Order of Water Buffaloes', 'timestamp': '1231500744'}]}}, {'artist': 'Katy Perry', 'track_data': {'playcount': 10, 'tracks': [{'track_name': 'Self Inflicted', 'timestamp': '1231507555'}, {'track_name': 'Lost', 'timestamp': '1231507299'}, {'track_name': 'Hot n Cold', 'timestamp': '1231507052'}, {'track_name': 'Waking Up in Vegas', 'timestamp': '1231506190'}, {'track_name': 'I Kissed a Girl', 'timestamp': '1231506009'}, {'track_name': 'One of the Boys', 'timestamp': '1231505761'}, {'track_name': 'If You Can Afford Me', 'timestamp': '1231505521'}, {'track_name': 'I Kissed a Girl', 'timestamp': '1231452756'}, {'track_name': 'One of the Boys', 'timestamp': '1231452508'}, {'track_name': 'Hot n Cold', 'timestamp': '1231452282'}]}}, {'artist': 'MGMT', 'track_data': {'playcount': 6, 'tracks': [{'track_name': 'Pieces of What', 'timestamp': '1231505389'}, {'track_name': '4th Dimensional Transition', 'timestamp': '1231505151'}, {'track_name': 'Kids', 'timestamp': '1231504848'}, {'track_name': 'Kids', 'timestamp': '1231485036'}, {'track_name': 'Electric Feel', 'timestamp': '1231484807'}, {'track_name': 'Time to Pretend', 'timestamp': '1231453632'}]}}, {'artist': 'The Decemberists', 'track_data': {'playcount': 5, 'tracks': [{'track_name': 'California One / Youth and Beauty Brigade', 'timestamp': '1231488453'}, {'track_name': 'Clementine', 'timestamp': '1231488205'}, {'track_name': "The Legionnaire's Lament", 'timestamp': '1231487920'}, {'track_name': 'July, July!', 'timestamp': '1231487736'}, {'track_name': 'Here I Dreamt I Was an Architect', 'timestamp': '1231487467'}]}}, {'artist': 'Kings of Leon', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Closer', 'timestamp': '1231520498'}]}}, {'artist': 'Paramore', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'I Caught Myself', 'timestamp': '1231504584'}]}}]}, {'day': datetime(2008, 1, 9, 16, 56, 28, 284072), 'data': [{'artist': 'The Receiving End of Sirens', 'track_data': {'playcount': 24, 'tracks': [{'track_name': 'The Heir of Empty Breath', 'timestamp': '1199909965'}, {'track_name': 'Music of the Spheres', 'timestamp': '1199909826'}, {'track_name': 'Stay Small', 'timestamp': '1199909611'}, {'track_name': 'Wanderers', 'timestamp': '1199909306'}, {'track_name': 'Saturnus', 'timestamp': '1199909077'}, {'track_name': 'A Realization of the Ear', 'timestamp': '1199908801'}, {'track_name': 'Smoke and Mirrors', 'timestamp': '1199908548'}, {'track_name': 'The Salesman, The Husband, The Lover', 'timestamp': '1199908130'}, {'track_name': 'The Crop And The Pest', 'timestamp': '1199907842'}, {'track_name': 'Oubliette (Disappear)', 'timestamp': '1199907588'}, {'track_name': 'Swallow People Whole', 'timestamp': '1199907243'}, {'track_name': 'Epilogue', 'timestamp': '1199892551'}, {'track_name': 'Venona', 'timestamp': '1199892382'}, {'track_name': 'Dead Men Tell No Tales', 'timestamp': '1199892130'}, {'track_name': 'Flee the Factory', 'timestamp': '1199891809'}, {'track_name': 'Broadcast Quality', 'timestamp': '1199891563'}, {'track_name': 'This Armistice', 'timestamp': '1199891206'}, {'track_name': 'Intermission', 'timestamp': '1199890934'}, {'track_name': '... Then I Defy You, Stars', 'timestamp': '1199890628'}, {'track_name': 'The War of All Against All', 'timestamp': '1199890378'}, {'track_name': 'The Evidence', 'timestamp': '1199890119'}, {'track_name': 'The Rival Cycle', 'timestamp': '1199889815'}, {'track_name': 'Planning a Prison Break', 'timestamp': '1199889496'}, {'track_name': 'Prologue', 'timestamp': '1199889454'}]}}, {'artist': 'Coheed and Cambria', 'track_data': {'playcount': 21, 'tracks': [{'track_name': 'The End Complete V: On the Brink', 'timestamp': '1199904023'}, {'track_name': 'The End Complete IV: The Road and the Damned', 'timestamp': '1199903803'}, {'track_name': 'The End Complete III: The End Complete', 'timestamp': '1199903338'}, {'track_name': 'The End Complete II: Raido Bye Bye', 'timestamp': '1199903044'}, {'track_name': 'The End Complete I: The Fall of House Atlantic', 'timestamp': '1199902980'}, {'track_name': 'Justice in Murder', 'timestamp': '1199902712'}, {'track_name': 'Gravemakers And Gunslingers', 'timestamp': '1199898313'}, {'track_name': 'Mother Superior', 'timestamp': '1199897915'}, {'track_name': 'The Running Free', 'timestamp': '1199897663'}, {'track_name': 'Feathers', 'timestamp': '1199897367'}, {'track_name': 'The Hound(of Blood and Rank)', 'timestamp': '1199897089'}, {'track_name': 'No World for Tomorrow', 'timestamp': '1199896783'}, {'track_name': 'The Reaping', 'timestamp': '1199896710'}, {'track_name': '33', 'timestamp': '1199872701'}, {'track_name': '2113', 'timestamp': '1199872115'}, {'track_name': 'The Willing Well IV: The Final Cut', 'timestamp': '1199867921'}, {'track_name': 'Willing Well III: Apollo II: The Telling Truth', 'timestamp': '1199867483'}, {'track_name': 'Willing Well II: From Fear Through the Eyes of Madness', 'timestamp': '1199867034'}, {'track_name': 'Willing Well I: Fuel For The Feeding End', 'timestamp': '1199866597'}, {'track_name': 'Welcome Home (acoustic)', 'timestamp': '1199861307'}, {'track_name': 'Welcome Home', 'timestamp': '1199830805'}]}}, {'artist': 'dredg', 'track_data': {'playcount': 14, 'tracks': [{'track_name': 'Matroshka (The Ornament)', 'timestamp': '1199896297'}, {'track_name': 'Hung Over On A Tuesday', 'timestamp': '1199896046'}, {'track_name': 'Jamais Vu', 'timestamp': '1199895750'}, {'track_name': 'Spitshine', 'timestamp': '1199895536'}, {'track_name': 'Planting Seeds', 'timestamp': '1199895284'}, {'track_name': 'Sang Real', 'timestamp': '1199895014'}, {'track_name': 'The Tanbark Is Hot Lava', 'timestamp': '1199894789'}, {'track_name': 'Zebraskin', 'timestamp': '1199894582'}, {'track_name': 'Not That Simple', 'timestamp': '1199894285'}, {'track_name': 'Catch Without Arms', 'timestamp': '1199893999'}, {'track_name': 'Ode To The Sun', 'timestamp': '1199893746'}, {'track_name': 'Bug Eyes', 'timestamp': '1199893485'}, {'track_name': 'Zebraskin', 'timestamp': '1199871909'}, {'track_name': 'Whoa Is Me', 'timestamp': '1199865787'}]}}, {'artist': 'The Fall of Troy', 'track_data': {'playcount': 13, 'tracks': [{'track_name': 'Mcaulay Mculkin', 'timestamp': '1199886926'}, {'track_name': 'Tom Waits', 'timestamp': '1199886754'}, {'track_name': "Whacko Jacko Steals The Elephant Man's Bones", 'timestamp': '1199886463'}, {'track_name': 'We Better Learn To Hotwire A Uterus', 'timestamp': '1199886333'}, {'track_name': 'Laces Out, Dan', 'timestamp': '1199886191'}, {'track_name': 'The Hol[ ]y Tape', 'timestamp': '1199885900'}, {'track_name': 'Mouths Like Sidewinder Missiles', 'timestamp': '1199885676'}, {'track_name': '"You Got a Death Wish, Johnny Truant?"', 'timestamp': '1199885544'}, {'track_name': 'F.C.P.R.E.M.I.X', 'timestamp': '1199885304'}, {'track_name': 'Act One, Scene One', 'timestamp': '1199885004'}, {'track_name': "I Just Got This Symphony Goin'", 'timestamp': '1199884754'}, {'track_name': 'What Sound Does A Mastodon Make?', 'timestamp': '1199863235'}, {'track_name': "Whacko Jacko Steals The Elephant Man's Bones", 'timestamp': '1199862477'}]}}, {'artist': 'Circa Survive', 'track_data': {'playcount': 13, 'tracks': [{'track_name': 'Your Friends Are Gone', 'timestamp': '1199878937'}, {'track_name': 'Close Your Eyes To See', 'timestamp': '1199878722'}, {'track_name': 'Carry Us Away', 'timestamp': '1199878522'}, {'track_name': 'On Letting Go', 'timestamp': '1199878279'}, {'track_name': 'Kicking Your Crosses Down', 'timestamp': '1199878061'}, {'track_name': 'Semi Constructive Criticism', 'timestamp': '1199877859'}, {'track_name': 'Travel Hymn', 'timestamp': '1199877667'}, {'track_name': 'Mandala', 'timestamp': '1199877463'}, {'track_name': 'The Difference Between Medicine And Poison Is In The Dose', 'timestamp': '1199877205'}, {'track_name': 'The Greatest Lie', 'timestamp': '1199876983'}, {'track_name': 'In the Morning and Amazing', 'timestamp': '1199876740'}, {'track_name': 'Living Together', 'timestamp': '1199876529'}, {'track_name': 'Wish Resign', 'timestamp': '1199868382'}]}}, {'artist': 'Slipknot', 'track_data': {'playcount': 7, 'tracks': [{'track_name': 'Opium of the People', 'timestamp': '1199906608'}, {'track_name': 'Vermillion', 'timestamp': '1199906285'}, {'track_name': 'Duality', 'timestamp': '1199906074'}, {'track_name': 'Before I Forget', 'timestamp': '1199905794'}, {'track_name': 'Pulse of the Maggots', 'timestamp': '1199905529'}, {'track_name': '(Sic)', 'timestamp': '1199905324'}, {'track_name': 'Wait and Bleed', 'timestamp': '1199905140'}]}}, {'artist': 'Death Cab for Cutie', 'track_data': {'playcount': 6, 'tracks': [{'track_name': 'Your Heart Is an Empty Room', 'timestamp': '1199871689'}, {'track_name': 'Your Bruise', 'timestamp': '1199871103'}, {'track_name': "Why You'd Want to Live Here", 'timestamp': '1199866123'}, {'track_name': 'What Sarah Said', 'timestamp': '1199863922'}, {'track_name': 'We Looked Like Giants', 'timestamp': '1199830173'}, {'track_name': 'We Laugh Indoors', 'timestamp': '1199829874'}]}}, {'artist': 'Saosin', 'track_data': {'playcount': 4, 'tracks': [{'track_name': '3rd Measurement In C [Acoustic]', 'timestamp': '1199875993'}, {'track_name': '3rd Measurement in C', 'timestamp': '1199872911'}, {'track_name': "You're Not Alone", 'timestamp': '1199870487'}, {'track_name': "You're No Angel", 'timestamp': '1199870318'}]}}, {'artist': 'Minus the Bear', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'You Kill Bugs Good, Man', 'timestamp': '1199870858'}, {'track_name': "Women We Haven't Met Yet", 'timestamp': '1199869191'}, {'track_name': 'White Mystery', 'timestamp': '1199864785'}, {'track_name': 'When We Escape', 'timestamp': '1199864069'}]}}, {'artist': 'Wolfmother', 'track_data': {'playcount': 4, 'tracks': [{'track_name': 'Woman', 'timestamp': '1199869028'}, {'track_name': 'Witchcraft', 'timestamp': '1199868636'}, {'track_name': 'The White Unicorn', 'timestamp': '1199865064'}, {'track_name': 'Where Eagles Have Been', 'timestamp': '1199864313'}]}}, {'artist': 'Cute Is What We Aim For', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'The Curse Of Curves', 'timestamp': '1199904779'}, {'track_name': 'The Curse Of Curves', 'timestamp': '1199879718'}]}}, {'artist': 'The Prize Fighter Inferno', 'track_data': {'playcount': 2, 'tracks': [{'track_name': '78', 'timestamp': '1199876184'}, {'track_name': 'Who Watches The Watchmen', 'timestamp': '1199865529'}]}}, {'artist': 'My Chemical Romance', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'You Know What They Do to Guys Like Us in Prison', 'timestamp': '1199870928'}, {'track_name': 'Welcome to the Black Parade', 'timestamp': '1199861635'}]}}, {'artist': 'Underoath', 'track_data': {'playcount': 2, 'tracks': [{'track_name': "You're Ever So Inviting", 'timestamp': '1199870065'}, {'track_name': 'Writing on the Walls', 'timestamp': '1199869654'}]}}, {'artist': 'The Used', 'track_data': {'playcount': 2, 'tracks': [{'track_name': 'Yesterday Feelings', 'timestamp': '1199869896'}, {'track_name': 'With Me Tonight', 'timestamp': '1199868841'}]}}, {'artist': 'Queen', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Bohemian Rhapsody', 'timestamp': '1199880896'}]}}, {'artist': "Plain White T's", 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Hey There Delilah', 'timestamp': '1199880650'}]}}, {'artist': 'Serj Tankian', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Empty Walls', 'timestamp': '1199879965'}]}}, {'artist': 'Chiodos', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'The Words "Best Friend" Become Redefined', 'timestamp': '1199869436'}]}}, {'artist': 'Fear Before the March of Flames', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Whisky Is Alright In Its Place, But Its Place Is In Hell', 'timestamp': '1199864645'}]}}, {'artist': 'Silversun Pickups', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'Well Thought Out Twinkles', 'timestamp': '1199861943'}]}}, {'artist': 'The Postal Service', 'track_data': {'playcount': 1, 'tracks': [{'track_name': 'We Will Become Silhouettes', 'timestamp': '1199830505'}]}}]}]




if __name__ == "__main__":
    from waitress import serve
    serve(app, host="0.0.0.0", port=8080)
